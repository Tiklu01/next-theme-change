#providers.tsx
'use client';

import React from 'react';
import { ThemeProvider } from 'next-themes';

export default function Providers({ children }: { children: React.ReactNode }) {
  return (
    <ThemeProvider attribute='class' defaultTheme='system' enableSystem> // Import the theme provider here to avoid making the layouts component, a client component
      {children}
    </ThemeProvider>
  );
}

#layouts.tsx

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="en" suppressHydrationWarning> // Suppress hydration warning to avoid hydration error
      <body className={inter.className}>
        <Providers>{children}</Providers> // Wrap the children in providers
      </body>
    </html>
  );
}

#ThemeChange.tsx
'use client';

import React, { useState, useEffect, Children } from 'react';
import { useTheme } from 'next-themes';
import ToggleButton from './ToggleButton';

export default function ThemeSwitch() {
  const [mounted, setMounted] = useState(false); 
  const {theme,setTheme, resolvedTheme } = useTheme(); // useTheme is a next-theme hook

  console.log('Current theme:', theme); // theme shows the current theme
  console.log('Resolved theme:', resolvedTheme); // resolved theme Shows the result in


  const light = () => {
    console.log('Switching to light theme');
    setTheme('light'); };
  const dark = () => {
    console.log('Switching to dark theme');
    setTheme('dark'); };

  useEffect(() => {
    setMounted(true); // Use effect To avoid unnecessary state changes
  }, []);

  if (!mounted) {
    return null // is mounted is Empty We return null
  }

  return ( <div className='flex justify-center '>
     <ToggleButton Click={resolvedTheme === 'dark' ? light : dark} /> // Changing themes based on Conditional statement
  </div>
   
  );
}

#globals.css
// eliminate all the default styles generated by nextJS and use this 
:root {
  /* Your default theme */
  --background: white;
  --foreground: black;
}

[data-theme='dark'] {
  --background: black;
  --foreground: white;
}

#tailwindConfig.js
 The most important don't forget to add
darkMode: 'class',